{%extends 'base.html'%}

{%block 'title'%} Dashboard {%endblock 'title'%}
{%block 'content'%}

<h1> Bem vindo, {{user.first_name}} {{user.last_name}} </h1>
<br>
<br>
{%include 'parcials/_messages.html'%}


  <p>
    <a class="btn btn-primary" href="{%url 'novo_contato'%}">
      Adicionar contato
    </a>
  </p>
  <div class="collapse" id="collapseExample">
    <div class="card card-body">
      <form class="form-outline" method="GET" action="{%url 'busca'%}">
        {%csrf_token%}
        <input type="search" name="termo" class="form-control" placeholder="Nome do contato ou telefone"/>
        <br>
        <input type="submit" value="Pesquisar" class="btn btn-primary" style="width:100px">
          <i class="fas fa-search"></i>
        </input>
    </form>
    </div>
  </div>
    
  </div>
          <table class="table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Sobrenome</th>
                <th>Telefone</th>
                <th>Email</th>
                <th>Categoria</th>
              </tr>
            </thead>
            <tbody>
              {% for contato in contatos %}
                <tr>
                  <td>{{contato.id}}</td>
                  <td>
                    <a href="{% url 'mostrar_contato' contato.id %}"> {{contato.nome}}</a>
                  </td>
                  <td>{{contato.sobrenome}}</td>
                  <td>{{contato.telefone}}</td>
                  <td>{{contato.email}}</td>
                  <td>{{contato.categoria}}</td>
                  <td><a href="{%url 'editar_contato' contato.id %}"> <img style="width: 30px" src="../../media/website-related/edit.png"> </img></a></td>
                  <td><a href="{%url 'excluir_contato' contato.id %}"><img style="width: 30px" src="../../media/website-related/delete.png"> </img></a></td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
  
          <nav>
            <ul class="pagination">
              {% for pagina in contatos.paginator.page_range %}
              <li>
                {%if contatos.number == pagina %}
                  <a class="page-link active" href="?page={{pagina}}&request.GET.get('termo') "> {{pagina}} </a>
                {%else%}
                <a class="page-link" href="?page={{pagina}}&request.GET.get('termo') "> {{pagina}} </a>
                {%endif%}
              </li>
              {% endfor %}
              <span class="current">
                PÃ¡gina {{ contatos.number }} de {{ contatos.paginator.num_pages }}.
              </span>
            </ul>
          </nav>
{%endblock%}